<%- include('../partials/header') %>

<style>
  /* Responsive wrapper for horizontal scrolling */
  .table-responsive {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }

  /* Tablet view adjustments */
  @media (max-width: 768px) {
    img {
      width: 70px !important;
      height: 70px !important;
    }

    th, td {
      font-size: 14px;
    }

    .btn {
      font-size: 12px;
      padding: 4px 8px;
    }

    .page-title {
      font-size: 20px;
    }
  }

  /* Mobile view: convert table to card layout */
  @media (max-width: 480px) {
    .table thead {
      display: none;
    }

    .table,
    .table tbody,
    .table tr,
    .table td {
      display: block;
      width: 100%;
    }

    .table tr {
      margin-bottom: 15px;
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      padding: 10px;
    }

    .table td {
      text-align: left;
      padding-left: 50%;
      position: relative;
      border: none;
      border-bottom: 1px solid #eee;
      font-size: 14px;
    }

    .table td::before {
      position: absolute;
      top: 10px;
      left: 10px;
      width: 45%;
      white-space: nowrap;
      font-weight: bold;
      color: #333;
    }

    /* Labels for each column */
    .table td:nth-of-type(1)::before { content: "#"; }
    .table td:nth-of-type(2)::before { content: "Image"; }
    .table td:nth-of-type(3)::before { content: "Category"; }
    .table td:nth-of-type(4)::before { content: "Action"; }

    img {
      width: 80px !important;
      height: 80px !important;
      display: block;
      margin: 5px 0;
    }

    .btn {
      margin-top: 5px;
      width: 48%;
      display: inline-block;
    }
  }
</style>

<div class="page-wrapper">
  <div class="page-breadcrumb">
    <div class="row">
      <div class="col-12 d-flex no-block align-items-center">
        <h4 class="page-title">Category</h4>
        <div class="ms-auto text-end">
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item active" aria-current="page">Library</li>
            </ol>
          </nav>
        </div>
      </div>
    </div>
  </div>

  <div class="container-fluid">
    <div class="row">
      <div class="col-12">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title mb-0">View Categories</h5>
          </div>

          <!-- Responsive table wrapper -->
          <div class="table-responsive">
            <table class="table table-bordered table-hover text-center align-middle">
              <thead class="table-dark">
                <tr>
                  <th scope="col" class="text-white">#</th>
                  <th scope="col" class="text-white">Image</th>
                  <th scope="col" class="text-white">Category</th>
                  <th scope="col" class="text-white">Action</th>
                </tr>
              </thead>
              <tbody>
                <% if (categories && categories.length > 0) { %>
                  <% categories.forEach((category, index) => { %>
                    <tr>
                      <td><%= index + 1 %></td>
                      <td>
                        <% if (category.image) { %>
                          <img src="<%= category.image %>" 
                               alt="<%= category.name %>" 
                               style="width:100px;height:100px;object-fit:cover;border-radius:6px;border:1px solid #ccc;box-shadow:0 2px 6px rgba(0,0,0,0.2);transition:transform 0.2s;"
                               onmouseover="this.style.transform='scale(1.05)'"
                               onmouseout="this.style.transform='scale(1)'">
                        <% } else { %>
                          <span>No Image</span>
                        <% } %>
                      </td>
                      <td><%= category.name %></td>
                      <td>
                        <a href="/category/delete/<%= category._id %>" class="btn btn-danger btn-sm">Delete</a>
                        <a href="/category/edit/<%= category._id %>" class="btn btn-warning btn-sm">Edit</a>
                      </td>
                    </tr>
                  <% }) %>
                <% } else { %>
                  <tr>
                    <td colspan="4">No Categories Found.</td>
                  </tr>
                <% } %>
              </tbody>
            </table>
          </div>

        </div>
      </div>
    </div>
  </div>

  <%- include('../partials/footer') %>
</div>
